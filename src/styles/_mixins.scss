// =============================================
// Variables
// =============================================

// Spacing
$spacing-xs: 0.5rem;
$spacing-sm: 0.75rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;
$spacing-xl: 2rem;

// Border Radius
$border-radius-sm: 4px;
$border-radius-md: 8px;
$border-radius-lg: 12px;
$border-radius-xl: 16px;
$border-radius-xxl: 24px;

// Font Weights
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-bold: 700;
$font-weight-black: 900;

// Colors
$white: #ffffff;
$black: #000000;

// =============================================
// Device-Specific Breakpoints
// =============================================

$breakpoints: (
  // Small phones (iPhone SE, Samsung Galaxy A series)
  mobile-small: 320px,
  // Standard phones (iPhone 12-15, Samsung Galaxy S series)
  mobile: 375px,
  // Large phones (iPhone Pro Max, OnePlus 9/10 Pro)
  mobile-large: 414px,
  // Small tablets (iPad Mini, Samsung Tab A)
  tablet-small: 600px,
  // Standard tablets (iPad, Samsung Tab S series)
  tablet: 768px,
  // Small laptops/landscape tablets
  laptop-small: 1024px,
  // Standard desktops
  desktop: 1280px,
  // Large screens
  desktop-large: 1440px,
  // Extra large screens
  desktop-xlarge: 1920px
);

// =============================================
// Enhanced Mixins
// =============================================

// Device-Aware Breakpoints
@mixin breakpoint($size, $type: min) {
  $width: map-get($breakpoints, $size);

  @if $width != null {
    @if $type == max {
      @media (max-width: ($width - 1px)) {
        @content;
      }
    } @else {
      @media (min-width: $width) {
        @content;
      }
    }
  } @else {
    @warn "No value found for breakpoint: #{$size}";
  }
}

// Device-Specific Adjustments
@mixin device($devices...) {
  @each $device in $devices {
    @if $device == iphone {
      @supports (-webkit-touch-callout: none) {
        @content;
      }
    } @else if $device == samsung {
      /* Samsung-specific adjustments */
      @media (-webkit-device-pixel-ratio: 3) and (orientation: portrait) {
        @content;
      }
    } @else if $device == oneplus {
      /* OnePlus-specific adjustments */
      @media (-webkit-device-pixel-ratio: 2.75) and (orientation: portrait) {
        @content;
      }
    }
  }
}

// Flex Centering with Device Awareness
@mixin centerFlex($direction: row, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  flex-wrap: $wrap;
  justify-content: center;
  align-items: center;

  // Optimize for touch devices
  @include device(iphone, samsung, oneplus) {
    -webkit-tap-highlight-color: transparent;
    -webkit-overflow-scrolling: touch;
  }
}

// Enhanced Text Clamp with Device-Specific Line Heights
@mixin textClamp($lines: 1, $mobile-lines: null) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;

  @if $mobile-lines {
    @include breakpoint(mobile-large, max) {
      -webkit-line-clamp: $mobile-lines;
    }
  }

  // Improve readability on AMOLED screens
  @include device(samsung, oneplus) {
    text-rendering: optimizeLegibility;
  }
}

// Absolute Centering with Device-Specific Tweaks
@mixin absoluteCenter($offsetX: 0, $offsetY: 0) {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(calc(-50% + #{$offsetX}), calc(-50% + #{$offsetY}));

  // Fix for Safari/iOS rendering
  @include device(iphone) {
    backface-visibility: hidden;
  }
}

// Enhanced CTA Button with Device-Specific Sizing
@mixin cta-button($bg-color, $text-color: $white) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-sm $spacing-md;
  border-radius: $border-radius-lg;
  background-color: $bg-color;
  color: $text-color;
  font-weight: $font-weight-bold;
  text-decoration: none;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
  min-width: 120px;

  // Touch device optimizations
  @include device(iphone, samsung, oneplus) {
    min-height: 44px; // Apple's recommended minimum touch target
    padding: $spacing-sm $spacing-lg;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }

  // Hover state with fallback for touch devices
  @media (hover: hover) {
    &:hover {
      background-color: darken($bg-color, 8%);
      transform: translateY(-1px);
    }
  }

  // Active state for touch devices
  &:active {
    background-color: darken($bg-color, 12%);
    transform: translateY(1px);
  }

  // Size variations
  &.small {
    padding: $spacing-xs $spacing-sm;
    font-size: 0.875rem;
    min-width: 100px;

    @include device(iphone, samsung, oneplus) {
      min-height: 36px;
    }
  }

  &.large {
    padding: $spacing-md $spacing-xl;
    font-size: 1.125rem;
    min-width: 140px;

    @include device(iphone, samsung, oneplus) {
      min-height: 48px;
    }
  }

  // Secondary style
  &.secondary {
    background-color: transparent;
    border: 2px solid $bg-color;
    color: $bg-color;

    @media (hover: hover) {
      &:hover {
        background-color: $bg-color;
        color: $text-color;
      }
    }

    &:active {
      background-color: darken($bg-color, 5%);
      color: $text-color;
    }
  }
}

// Custom Scrollbar with Device-Specific Styles
@mixin customScrollbar($trackColor: #f0f0f0, $thumbColor: #ccc) {
  &::-webkit-scrollbar {
    width: 6px;

    @include breakpoint(tablet) {
      width: 8px;
    }
  }

  &::-webkit-scrollbar-track {
    background: $trackColor;
    border-radius: $border-radius-sm;
  }

  &::-webkit-scrollbar-thumb {
    background-color: $thumbColor;
    border-radius: $border-radius-lg;

    // Better visibility on AMOLED screens
    @include device(samsung, oneplus) {
      background-color: lighten($thumbColor, 5%);
    }
  }

  // Firefox support
  scrollbar-width: thin;
  scrollbar-color: $thumbColor $trackColor;
}

// Device-Safe Transition Mixin
@mixin safeTransition($properties...) {
  $transition: ();
  
  @each $property in $properties {
    $transition: append($transition, #{$property} 0.3s ease, $separator: comma);
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: $transition;
  }
}

// Pixel Density Aware Background Images
@mixin retina-image($file, $type, $width, $height) {
  background-image: url($file + '.' + $type);

  @media (-webkit-min-device-pixel-ratio: 2),
         (min-resolution: 192dpi) {
    background-image: url($file + '@2x.' + $type);
    background-size: $width $height;
  }

  @media (-webkit-min-device-pixel-ratio: 3),
         (min-resolution: 288dpi) {
    background-image: url($file + '@3x.' + $type);
    background-size: $width $height;
  }
}

// =============================================
// Usage Examples
// =============================================

/* Example 1: Device-specific button */
.my-button {
  @include cta-button(#008c95);
  
  @include device(iphone) {
    font-weight: $font-weight-medium;
  }
  
  @include device(samsung) {
    border-radius: $border-radius-xl;
  }
}

/* Example 2: Responsive text clamping */
.article-excerpt {
  @include textClamp(3, 2); // 3 lines desktop, 2 lines mobile
}

/* Example 3: Complex responsive layout */
.responsive-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: $spacing-md;
  
  @include breakpoint(tablet) {
    grid-template-columns: repeat(2, 1fr);
  }
  
  @include breakpoint(desktop) {
    grid-template-columns: repeat(3, 1fr);
    gap: $spacing-lg;
  }
  
  @include device(iphone) {
    -webkit-overflow-scrolling: touch;
  }
}
// Add this to your mixins.scss file or directly in this file
@mixin box-shadow($x, $y, $blur, $color, $inset: false) {
  @if $inset {
    box-shadow: inset $x $y $blur $color;
    -webkit-box-shadow: inset $x $y $blur $color;
  } @else {
    box-shadow: $x $y $blur $color;
    -webkit-box-shadow: $x $y $blur $color;
  }
}
// Breakpoints
$breakpoints: (
  'small': 576px,
  'medium': 768px,
  'large': 992px,
  'xlarge': 1200px
);

// Mixin for responsive design
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (max-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint '#{$breakpoint}' not found in $breakpoints";
  }
}